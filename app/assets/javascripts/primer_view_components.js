const t=!!navigator.userAgent.match(/Macintosh/);class e{constructor(e,n){this.input=e,this.list=n,this.isComposing=!1,n.id||(n.id=`combobox-${Math.random().toString().slice(2,6)}`),this.keyboardEventHandler=e=>function(e,n){if(e.shiftKey||e.metaKey||e.altKey)return;if(!t&&e.ctrlKey)return;if(n.isComposing)return;switch(e.key){case"Enter":case"Tab":(function(t,e){const n=e.querySelector('[aria-selected="true"]');return!!n&&("true"===n.getAttribute("aria-disabled")||n.click(),!0)})(n.input,n.list)&&e.preventDefault();break;case"Escape":n.clearSelection();break;case"ArrowDown":n.navigate(1),e.preventDefault();break;case"ArrowUp":n.navigate(-1),e.preventDefault();break;case"n":t&&e.ctrlKey&&(n.navigate(1),e.preventDefault());break;case"p":t&&e.ctrlKey&&(n.navigate(-1),e.preventDefault());break;default:if(e.ctrlKey)break;n.clearSelection()}}(e,this),this.compositionEventHandler=t=>function(t,e){e.isComposing="compositionstart"===t.type;if(!document.getElementById(e.input.getAttribute("aria-controls")||""))return;e.clearSelection()}(t,this),this.inputHandler=this.clearSelection.bind(this),e.setAttribute("role","combobox"),e.setAttribute("aria-controls",n.id),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",n)}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",n)}navigate(t=1){const e=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(s)[0],n=Array.from(this.list.querySelectorAll('[role="option"]')).filter(s),o=n.indexOf(e);if(o===n.length-1&&1===t||0===o&&-1===t)return this.clearSelection(),void this.input.focus();let r=1===t?0:n.length-1;if(e&&o>=0){const e=o+t;e>=0&&e<n.length&&(r=e)}const a=n[r];if(a)for(const t of n)a===t?(this.input.setAttribute("aria-activedescendant",a.id),a.setAttribute("aria-selected","true"),i(this.list,a)):t.setAttribute("aria-selected","false")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.setAttribute("aria-selected","false")}}function n(t){if(!(t.target instanceof Element))return;const e=t.target.closest('[role="option"]');e&&"true"!==e.getAttribute("aria-disabled")&&function(t){t.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}(e)}function s(t){return!t.hidden&&!(t instanceof HTMLInputElement&&"hidden"===t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}function i(t,e){(function(t,e){const n=t.scrollTop,s=n+t.clientHeight,i=e.offsetTop,o=i+e.clientHeight;return i>=n&&o<=s})(t,e)||(t.scrollTop=e.offsetTop)}class o extends CustomEvent{constructor(t,e){super(t,e),this.relatedTarget=e.relatedTarget}}const r=new WeakMap;function a(t,e){const n=new XMLHttpRequest;return n.open("GET",e,!0),n.setRequestHeader("Accept","text/fragment+html"),function(t,e){const n=r.get(t);n&&n.abort();r.set(t,e);const s=()=>r.delete(t),i=function(t){return new Promise(((e,n)=>{t.onload=function(){t.status>=200&&t.status<300?e(t.responseText):n(new Error(t.responseText))},t.onerror=n,t.send()}))}(e);return i.then(s,s),i}(t,n)}class c{constructor(t,n,s){this.container=t,this.input=n,this.results=s,this.combobox=new e(n,s),this.results.hidden=!0,this.input.setAttribute("autocomplete","off"),this.input.setAttribute("spellcheck","false"),this.interactingWithList=!1,this.onInputChange=function(t,e=0){let n;return function(...s){clearTimeout(n),n=window.setTimeout((()=>{clearTimeout(n),t(...s)}),e)}}(this.onInputChange.bind(this),300),this.onResultsMouseDown=this.onResultsMouseDown.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.onKeydown=this.onKeydown.bind(this),this.onCommit=this.onCommit.bind(this),this.input.addEventListener("keydown",this.onKeydown),this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("blur",this.onInputBlur),this.input.addEventListener("input",this.onInputChange),this.results.addEventListener("mousedown",this.onResultsMouseDown),this.results.addEventListener("combobox-commit",this.onCommit)}destroy(){this.input.removeEventListener("keydown",this.onKeydown),this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("blur",this.onInputBlur),this.input.removeEventListener("input",this.onInputChange),this.results.removeEventListener("mousedown",this.onResultsMouseDown),this.results.removeEventListener("combobox-commit",this.onCommit)}onKeydown(t){if("Escape"===t.key&&this.container.open)this.container.open=!1,t.stopPropagation(),t.preventDefault();else if(t.altKey&&"ArrowUp"===t.key&&this.container.open)this.container.open=!1,t.stopPropagation(),t.preventDefault();else if(t.altKey&&"ArrowDown"===t.key&&!this.container.open){if(!this.input.value.trim())return;this.container.open=!0,t.stopPropagation(),t.preventDefault()}}onInputFocus(){this.fetchResults()}onInputBlur(){this.interactingWithList?this.interactingWithList=!1:this.container.open=!1}onCommit({target:t}){const e=t;if(!(e instanceof HTMLElement))return;if(this.container.open=!1,e instanceof HTMLAnchorElement)return;const n=e.getAttribute("data-autocomplete-value")||e.textContent;this.container.value=n}onResultsMouseDown(){this.interactingWithList=!0}onInputChange(){this.container.removeAttribute("value"),this.fetchResults()}identifyOptions(){let t=0;for(const e of this.results.querySelectorAll('[role="option"]:not([id])'))e.id=`${this.results.id}-option-${t++}`}fetchResults(){const t=this.input.value.trim();if(!t)return void(this.container.open=!1);const e=this.container.src;if(!e)return;const n=new URL(e,window.location.href),s=new URLSearchParams(n.search.slice(1));s.append("q",t),n.search=s.toString(),this.container.dispatchEvent(new CustomEvent("loadstart")),a(this.input,n.toString()).then((t=>{this.results.innerHTML=t,this.identifyOptions();const e=!!this.results.querySelector('[role="option"]');this.container.open=e,this.container.dispatchEvent(new CustomEvent("load")),this.container.dispatchEvent(new CustomEvent("loadend"))})).catch((()=>{this.container.dispatchEvent(new CustomEvent("error")),this.container.dispatchEvent(new CustomEvent("loadend"))}))}open(){this.results.hidden&&(this.combobox.start(),this.results.hidden=!1)}close(){this.results.hidden||(this.combobox.stop(),this.results.hidden=!0)}}const l=new WeakMap;class u extends HTMLElement{constructor(){super()}connectedCallback(){const t=this.getAttribute("for");if(!t)return;const e=this.querySelector("input"),n=document.getElementById(t);e instanceof HTMLInputElement&&n&&(l.set(this,new c(this,e,n)),n.setAttribute("role","listbox"))}disconnectedCallback(){const t=l.get(this);t&&(t.destroy(),l.delete(this))}get src(){return this.getAttribute("src")||""}set src(t){this.setAttribute("src",t)}get value(){return this.getAttribute("value")||""}set value(t){this.setAttribute("value",t)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}static get observedAttributes(){return["open","value"]}attributeChangedCallback(t,e,n){if(e===n)return;const s=l.get(this);if(s)switch(t){case"open":null===n?s.close():s.open();break;case"value":null!==n&&(s.input.value=n),this.dispatchEvent(new o("auto-complete-change",{bubbles:!0,relatedTarget:s.input}))}}}function d(t){if("clipboard"in navigator)return navigator.clipboard.writeText(t.textContent);const e=getSelection();if(null==e)return Promise.reject(new Error);e.removeAllRanges();const n=document.createRange();return n.selectNodeContents(t),e.addRange(n),document.execCommand("copy"),e.removeAllRanges(),Promise.resolve()}function h(t){if("clipboard"in navigator)return navigator.clipboard.writeText(t);const e=document.body;if(!e)return Promise.reject(new Error);const n=function(t){const e=document.createElement("pre");return e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="5px",e.textContent=t,e}(t);return e.appendChild(n),d(n),e.removeChild(n),Promise.resolve()}function m(t){const e=t.getAttribute("for"),n=t.getAttribute("value");function s(){t.dispatchEvent(new CustomEvent("clipboard-copy",{bubbles:!0}))}if(n)h(n).then(s);else if(e){const n="getRootNode"in Element.prototype?t.getRootNode():t.ownerDocument;if(!(n instanceof Document||"ShadowRoot"in window&&n instanceof ShadowRoot))return;const o=n.getElementById(e);o&&(i=o,i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement?h(i.value):i instanceof HTMLAnchorElement&&i.hasAttribute("href")?h(i.href):d(i)).then(s)}var i}function f(t){const e=t.currentTarget;e instanceof HTMLElement&&m(e)}function p(t){if(" "===t.key||"Enter"===t.key){const e=t.currentTarget;e instanceof HTMLElement&&(t.preventDefault(),m(e))}}function g(t){t.currentTarget.addEventListener("keydown",p)}function b(t){t.currentTarget.removeEventListener("keydown",p)}window.customElements.get("auto-complete")||(window.AutocompleteElement=u,window.customElements.define("auto-complete",u));class w extends HTMLElement{constructor(){super(),this.addEventListener("click",f),this.addEventListener("focus",g),this.addEventListener("blur",b)}connectedCallback(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}get value(){return this.getAttribute("value")||""}set value(t){this.setAttribute("value",t)}}window.customElements.get("clipboard-copy")||(window.ClipboardCopyElement=w,window.customElements.define("clipboard-copy",w));function v(t){t.style.display="inline-block"}function E(t){t.style.display="none"}const y=new WeakMap;document.addEventListener("clipboard-copy",(function({target:t}){if(!(t instanceof HTMLElement))return;if(!t.hasAttribute("data-view-component"))return;const e=y.get(t);e?(clearTimeout(e),y.delete(t)):function(t){const[e,n]=t.querySelectorAll(".octicon");e&&n&&(E(e),v(n))}(t),y.set(t,setTimeout((()=>{!function(t){const[e,n]=t.querySelectorAll(".octicon");e&&n&&(v(e),E(n))}(t),y.delete(t)}),2e3))}));class A extends HTMLElement{constructor(){super(),this.addEventListener("keydown",(t=>{const e=t.target;if(!(e instanceof HTMLElement))return;if("tab"!==e.getAttribute("role")&&!e.closest('[role="tablist"]'))return;const n=Array.from(this.querySelectorAll('[role="tablist"] [role="tab"]')),s=n.indexOf(n.find((t=>t.matches('[aria-selected="true"]'))));if("ArrowRight"===t.code){let t=s+1;t>=n.length&&(t=0),x(this,t)}else if("ArrowLeft"===t.code){let t=s-1;t<0&&(t=n.length-1),x(this,t)}else"Home"===t.code?(x(this,0),t.preventDefault()):"End"===t.code&&(x(this,n.length-1),t.preventDefault())})),this.addEventListener("click",(t=>{const e=Array.from(this.querySelectorAll('[role="tablist"] [role="tab"]'));if(!(t.target instanceof Element))return;const n=t.target.closest('[role="tab"]');if(!n||!n.closest('[role="tablist"]'))return;x(this,e.indexOf(n))}))}connectedCallback(){for(const t of this.querySelectorAll('[role="tablist"] [role="tab"]'))t.hasAttribute("aria-selected")||t.setAttribute("aria-selected","false"),t.hasAttribute("tabindex")||("true"===t.getAttribute("aria-selected")?t.setAttribute("tabindex","0"):t.setAttribute("tabindex","-1"))}}function x(t,e){const n=t.querySelectorAll('[role="tablist"] [role="tab"]'),s=t.querySelectorAll('[role="tabpanel"]'),i=n[e],o=s[e];if(!!t.dispatchEvent(new CustomEvent("tab-container-change",{bubbles:!0,cancelable:!0,detail:{relatedTarget:o}}))){for(const t of n)t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1");for(const t of s)t.hidden=!0,t.hasAttribute("tabindex")||t.hasAttribute("data-tab-container-no-tabstop")||t.setAttribute("tabindex","0");i.setAttribute("aria-selected","true"),i.setAttribute("tabindex","0"),i.focus(),o.hidden=!1,t.dispatchEvent(new CustomEvent("tab-container-changed",{bubbles:!0,detail:{relatedTarget:o}}))}}window.customElements.get("tab-container")||(window.TabContainerElement=A,window.customElements.define("tab-container",A));const k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"];function S(t){return`0${t}`.slice(-2)}function T(t,e){const n=t.getDay(),s=t.getDate(),i=t.getMonth(),o=t.getFullYear(),r=t.getHours(),a=t.getMinutes(),c=t.getSeconds();return e.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,(function(e){let l;switch(e[1]){case"%":return"%";case"a":return k[n].slice(0,3);case"A":return k[n];case"b":return M[i].slice(0,3);case"B":return M[i];case"c":return t.toString();case"d":return S(s);case"e":return String(s);case"H":return S(r);case"I":return S(T(t,"%l"));case"l":return String(0===r||12===r?12:(r+12)%12);case"m":return S(i+1);case"M":return S(a);case"p":return r>11?"PM":"AM";case"P":return r>11?"pm":"am";case"S":return S(c);case"w":return String(n);case"y":return S(o%100);case"Y":return String(o);case"Z":return l=t.toString().match(/\((\w+)\)$/),l?l[1]:"";case"z":return l=t.toString().match(/\w([+-]\d\d\d\d) /),l?l[1]:""}return""}))}function L(t){let e;return function(){if(e)return e;if("Intl"in window)try{return e=new Intl.DateTimeFormat(void 0,t),e}catch(t){if(!(t instanceof RangeError))throw t}}}let C=null;const H=L({day:"numeric",month:"short"});function D(){if(null!==C)return C;const t=H();if(t){const e=t.format(new Date(0));return C=!!e.match(/^\d/),C}return!1}let $=null;const q=L({day:"numeric",month:"short",year:"numeric"});function R(t){const e=t.closest("[lang]");return e instanceof HTMLElement&&e.lang?e.lang:"default"}const F=new WeakMap;class I extends HTMLElement{static get observedAttributes(){return["datetime","day","format","lang","hour","minute","month","second","title","weekday","year","time-zone-name"]}connectedCallback(){const t=this.getFormattedTitle();t&&!this.hasAttribute("title")&&this.setAttribute("title",t);const e=this.getFormattedDate();e&&(this.textContent=e)}attributeChangedCallback(t,e,n){const s=this.getFormattedTitle();if("datetime"===t){const t=Date.parse(n);isNaN(t)?F.delete(this):F.set(this,new Date(t))}const i=this.getFormattedTitle(),o=this.getAttribute("title");"title"===t||!i||o&&o!==s||this.setAttribute("title",i);const r=this.getFormattedDate();r&&(this.textContent=r)}get date(){return F.get(this)}getFormattedTitle(){const t=this.date;if(!t)return;const e=W();if(e)return e.format(t);try{return t.toLocaleString()}catch(e){if(e instanceof RangeError)return t.toString();throw e}}getFormattedDate(){}}const W=L({day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}),Y=new WeakMap;class B extends I{attributeChangedCallback(t,e,n){"hour"!==t&&"minute"!==t&&"second"!==t&&"time-zone-name"!==t||Y.delete(this),super.attributeChangedCallback(t,e,n)}getFormattedDate(){const t=this.date;if(!t)return;return`${function(t,e){const n={weekday:{short:"%a",long:"%A"},day:{numeric:"%e","2-digit":"%d"},month:{short:"%b",long:"%B"},year:{numeric:"%Y","2-digit":"%y"}};let s=D()?"weekday day month year":"weekday month day, year";for(const e in n){const i=n[e][t.getAttribute(e)||""];s=s.replace(e,i||"")}return s=s.replace(/(\s,)|(,\s$)/,""),T(e,s).replace(/\s+/," ").trim()}(this,t)||""} ${function(t,e){const n={},s=t.getAttribute("hour");"numeric"!==s&&"2-digit"!==s||(n.hour=s);const i=t.getAttribute("minute");"numeric"!==i&&"2-digit"!==i||(n.minute=i);const o=t.getAttribute("second");"numeric"!==o&&"2-digit"!==o||(n.second=o);const r=t.getAttribute("time-zone-name");"short"!==r&&"long"!==r||(n.timeZoneName=r);if(0===Object.keys(n).length)return;let a=Y.get(t);a||(a=L(n),Y.set(t,a));const c=a();if(c)return c.format(e);return T(e,n.second?"%H:%M:%S":"%H:%M")}(this,t)||""}`.trim()}}window.customElements.get("local-time")||(window.LocalTimeElement=B,window.customElements.define("local-time",B));class N{constructor(t,e){this.date=t,this.locale=e}toString(){const t=this.timeElapsed();if(t)return t;{const t=this.timeAhead();return t||`on ${this.formatDate()}`}}timeElapsed(){const t=(new Date).getTime()-this.date.getTime(),e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24);return t>=0&&i<30?this.timeAgoFromMs(t):null}timeAhead(){const t=this.date.getTime()-(new Date).getTime(),e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24);return t>=0&&i<30?this.timeUntil():null}timeAgo(){const t=(new Date).getTime()-this.date.getTime();return this.timeAgoFromMs(t)}timeAgoFromMs(t){const e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24),o=Math.round(i/30),r=Math.round(o/12);return t<0||e<10?O(this.locale,0,"second"):e<45?O(this.locale,-e,"second"):e<90||n<45?O(this.locale,-n,"minute"):n<90||s<24?O(this.locale,-s,"hour"):s<36||i<30?O(this.locale,-i,"day"):o<18?O(this.locale,-o,"month"):O(this.locale,-r,"year")}microTimeAgo(){const t=(new Date).getTime()-this.date.getTime(),e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24),o=Math.round(i/30),r=Math.round(o/12);return n<1?"1m":n<60?`${n}m`:s<24?`${s}h`:i<365?`${i}d`:`${r}y`}timeUntil(){const t=this.date.getTime()-(new Date).getTime();return this.timeUntilFromMs(t)}timeUntilFromMs(t){const e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24),o=Math.round(i/30),r=Math.round(o/12);return o>=18||o>=12?O(this.locale,r,"year"):i>=45||i>=30?O(this.locale,o,"month"):s>=36||s>=24?O(this.locale,i,"day"):n>=90||n>=45?O(this.locale,s,"hour"):e>=90||e>=45?O(this.locale,n,"minute"):O(this.locale,e>=10?e:0,"second")}microTimeUntil(){const t=this.date.getTime()-(new Date).getTime(),e=Math.round(t/1e3),n=Math.round(e/60),s=Math.round(n/60),i=Math.round(s/24),o=Math.round(i/30),r=Math.round(o/12);return i>=365?`${r}y`:s>=24?`${i}d`:n>=60?`${s}h`:n>1?`${n}m`:"1m"}formatDate(){let t=D()?"%e %b":"%b %e";var e;return e=this.date,(new Date).getUTCFullYear()!==e.getUTCFullYear()&&(t+=function(){if(null!==$)return $;const t=q();if(t){const e=t.format(new Date(0));return $=!!e.match(/\d,/),$}return!0}()?", %Y":" %Y"),T(this.date,t)}formatTime(){const t=P();return t?t.format(this.date):T(this.date,"%l:%M%P")}}function O(t,e,n){const s=function(t,e){if("Intl"in window&&"RelativeTimeFormat"in window.Intl)try{return new Intl.RelativeTimeFormat(t,e)}catch(t){if(!(t instanceof RangeError))throw t}}(t,{numeric:"auto"});return s?s.format(e,n):function(t,e){if(0===t)switch(e){case"year":case"quarter":case"month":case"week":return`this ${e}`;case"day":return"today";case"hour":case"minute":return`in 0 ${e}s`;case"second":return"now"}else if(1===t)switch(e){case"year":case"quarter":case"month":case"week":return`next ${e}`;case"day":return"tomorrow";case"hour":case"minute":case"second":return`in 1 ${e}`}else if(-1===t)switch(e){case"year":case"quarter":case"month":case"week":return`last ${e}`;case"day":return"yesterday";case"hour":case"minute":case"second":return`1 ${e} ago`}else if(t>1)switch(e){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`in ${t} ${e}s`}else if(t<-1)switch(e){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`${-t} ${e}s ago`}throw new RangeError(`Invalid unit argument for format() '${e}'`)}(e,n)}const P=L({hour:"numeric",minute:"2-digit"});class U extends I{getFormattedDate(){const t=this.date;if(t)return new N(t,R(this)).toString()}connectedCallback(){X.push(this),K||(z(),K=window.setInterval(z,6e4)),super.connectedCallback()}disconnectedCallback(){const t=X.indexOf(this);-1!==t&&X.splice(t,1),X.length||K&&(clearInterval(K),K=null)}}const X=[];let K;function z(){let t,e,n;for(e=0,n=X.length;e<n;e++)t=X[e],t.textContent=t.getFormattedDate()||""}window.customElements.get("relative-time")||(window.RelativeTimeElement=U,window.customElements.define("relative-time",U));class j extends U{getFormattedDate(){const t=this.getAttribute("format"),e=this.date;if(e)return"micro"===t?new N(e,R(this)).microTimeAgo():new N(e,R(this)).timeAgo()}}window.customElements.get("time-ago")||(window.TimeAgoElement=j,window.customElements.define("time-ago",j));class Z extends U{getFormattedDate(){const t=this.getAttribute("format"),e=this.date;if(e)return"micro"===t?new N(e,R(this)).microTimeUntil():new N(e,R(this)).timeUntil()}}window.customElements.get("time-until")||(window.TimeUntilElement=Z,window.customElements.define("time-until",Z));const J=new WeakMap,_=new WeakMap,G=new WeakMap;function Q(t){const e=t.currentTarget;if(!(e instanceof rt))return;const{box:n,image:s}=G.get(e)||{};if(!n||!s)return;let i=0,o=0;if(t instanceof KeyboardEvent)"ArrowUp"===t.key?o=-1:"ArrowDown"===t.key?o=1:"ArrowLeft"===t.key?i=-1:"ArrowRight"===t.key&&(i=1);else if(_.has(e)&&t instanceof MouseEvent){const n=_.get(e);i=t.pageX-n.dragStartX,o=t.pageY-n.dragStartY}else if(_.has(e)&&t instanceof TouchEvent){const{pageX:n,pageY:s}=t.changedTouches[0],{dragStartX:r,dragStartY:a}=_.get(e);i=n-r,o=s-a}if(0!==i||0!==o){const t=Math.min(Math.max(0,n.offsetLeft+i),s.width-n.offsetWidth),r=Math.min(Math.max(0,n.offsetTop+o),s.height-n.offsetHeight);n.style.left=`${t}px`,n.style.top=`${r}px`,ot(e,{x:t,y:r,width:n.offsetWidth,height:n.offsetHeight})}if(t instanceof MouseEvent)_.set(e,{dragStartX:t.pageX,dragStartY:t.pageY});else if(t instanceof TouchEvent){const{pageX:n,pageY:s}=t.changedTouches[0];_.set(e,{dragStartX:n,dragStartY:s})}}function V(t){const e=t.target;if(!(e instanceof HTMLElement))return;const n=tt(e);if(!(n instanceof rt))return;const{box:s}=G.get(n)||{};if(!s)return;const i=n.getBoundingClientRect();let o,r,a;if(t instanceof KeyboardEvent){if("Escape"===t.key)return st(n);if("-"===t.key&&(a=-10),"="===t.key&&(a=10),!a)return;o=s.offsetWidth+a,r=s.offsetHeight+a,J.set(n,{startX:s.offsetLeft,startY:s.offsetTop})}else if(t instanceof MouseEvent){const e=J.get(n);if(!e)return;o=t.pageX-e.startX-i.left-window.pageXOffset,r=t.pageY-e.startY-i.top-window.pageYOffset}else if(t instanceof TouchEvent){const e=J.get(n);if(!e)return;o=t.changedTouches[0].pageX-e.startX-i.left-window.pageXOffset,r=t.changedTouches[0].pageY-e.startY-i.top-window.pageYOffset}o&&r&&nt(n,o,r,!(t instanceof KeyboardEvent))}function tt(t){const e=t.getRootNode();return e instanceof ShadowRoot?e.host:t}function et(t){const e=t.currentTarget;if(!(e instanceof HTMLElement))return;const n=tt(e);if(!(n instanceof rt))return;const{box:s}=G.get(n)||{};if(!s)return;const i=t.target;if(i instanceof HTMLElement)if(i.hasAttribute("data-direction")){const e=i.getAttribute("data-direction")||"";n.addEventListener("mousemove",V),n.addEventListener("touchmove",V,{passive:!0}),["nw","se"].indexOf(e)>=0&&n.classList.add("nwse"),["ne","sw"].indexOf(e)>=0&&n.classList.add("nesw"),J.set(n,{startX:s.offsetLeft+(["se","ne"].indexOf(e)>=0?0:s.offsetWidth),startY:s.offsetTop+(["se","sw"].indexOf(e)>=0?0:s.offsetHeight)}),V(t)}else n.addEventListener("mousemove",Q),n.addEventListener("touchmove",Q,{passive:!0})}function nt(t,e,n,s=!0){let i=Math.max(Math.abs(e),Math.abs(n),10);const o=J.get(t);if(!o)return;const{box:r,image:a}=G.get(t)||{};if(!r||!a)return;i=Math.min(i,n>0?a.height-o.startY:o.startY,e>0?a.width-o.startX:o.startX);const c=s?Math.round(Math.max(0,e>0?o.startX:o.startX-i)):r.offsetLeft,l=s?Math.round(Math.max(0,n>0?o.startY:o.startY-i)):r.offsetTop;r.style.left=`${c}px`,r.style.top=`${l}px`,r.style.width=`${i}px`,r.style.height=`${i}px`,ot(t,{x:c,y:l,width:i,height:i})}function st(t){const{image:e}=G.get(t)||{};if(!e)return;const n=Math.round(e.clientWidth>e.clientHeight?e.clientHeight:e.clientWidth);J.set(t,{startX:(e.clientWidth-n)/2,startY:(e.clientHeight-n)/2}),nt(t,n,n)}function it(t){const e=t.currentTarget;e instanceof rt&&(_.delete(e),e.classList.remove("nwse","nesw"),e.removeEventListener("mousemove",V),e.removeEventListener("mousemove",Q),e.removeEventListener("touchmove",V),e.removeEventListener("touchmove",Q))}function ot(t,e){const{image:n}=G.get(t)||{};if(!n)return;const s=n.naturalWidth/n.width;for(const n in e){const i=Math.round(e[n]*s);e[n]=i;const o=t.querySelector(`[data-image-crop-input='${n}']`);o instanceof HTMLInputElement&&(o.value=i.toString())}t.dispatchEvent(new CustomEvent("image-crop-change",{bubbles:!0,detail:e}))}class rt extends HTMLElement{connectedCallback(){if(G.has(this))return;const t=this.attachShadow({mode:"open"});t.innerHTML='\n<style>\n  :host { touch-action: none; display: block; }\n  :host(.nesw) { cursor: nesw-resize; }\n  :host(.nwse) { cursor: nwse-resize; }\n  :host(.nesw) .crop-box, :host(.nwse) .crop-box { cursor: inherit; }\n  :host([loaded]) .crop-image { display: block; }\n  :host([loaded]) ::slotted([data-loading-slot]), .crop-image { display: none; }\n\n  .crop-wrapper {\n    position: relative;\n    font-size: 0;\n  }\n  .crop-container {\n    user-select: none;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    position: absolute;\n    overflow: hidden;\n    z-index: 1;\n    top: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :host([rounded]) .crop-box {\n    border-radius: 50%;\n    box-shadow: 0 0 0 4000px rgba(0, 0, 0, 0.3);\n  }\n  .crop-box {\n    position: absolute;\n    border: 1px dashed #fff;\n    box-sizing: border-box;\n    cursor: move;\n  }\n\n  :host([rounded]) .crop-outline {\n    outline: none;\n  }\n  .crop-outline {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    outline: 4000px solid rgba(0, 0, 0, .3);\n  }\n\n  .handle { position: absolute; }\n  :host([rounded]) .handle::before { border-radius: 50%; }\n  .handle:before {\n    position: absolute;\n    display: block;\n    padding: 4px;\n    transform: translate(-50%, -50%);\n    content: \' \';\n    background: #fff;\n    border: 1px solid #767676;\n  }\n  .ne { top: 0; right: 0; cursor: nesw-resize; }\n  .nw { top: 0; left: 0; cursor: nwse-resize; }\n  .se { bottom: 0; right: 0; cursor: nwse-resize; }\n  .sw { bottom: 0; left: 0; cursor: nesw-resize; }\n</style>\n<slot></slot>\n<div class="crop-wrapper">\n  <img width="100%" class="crop-image" alt="">\n  <div class="crop-container">\n    <div data-crop-box class="crop-box">\n      <div class="crop-outline"></div>\n      <div data-direction="nw" class="handle nw"></div>\n      <div data-direction="ne" class="handle ne"></div>\n      <div data-direction="sw" class="handle sw"></div>\n      <div data-direction="se" class="handle se"></div>\n    </div>\n  </div>\n</div>\n';const e=t.querySelector("[data-crop-box]");if(!(e instanceof HTMLElement))return;const n=t.querySelector("img");n instanceof HTMLImageElement&&(G.set(this,{box:e,image:n}),n.addEventListener("load",(()=>{this.loaded=!0,st(this)})),this.addEventListener("mouseleave",it),this.addEventListener("touchend",it),this.addEventListener("mouseup",it),e.addEventListener("mousedown",et),e.addEventListener("touchstart",et,{passive:!0}),this.addEventListener("keydown",Q),this.addEventListener("keydown",V),this.src&&(n.src=this.src))}static get observedAttributes(){return["src"]}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loaded(){return this.hasAttribute("loaded")}set loaded(t){t?this.setAttribute("loaded",""):this.removeAttribute("loaded")}attributeChangedCallback(t,e,n){const{image:s}=G.get(this)||{};"src"===t&&(this.loaded=!1,s&&(s.src=n))}}window.customElements.get("image-crop")||(window.ImageCropElement=rt,window.customElements.define("image-crop",rt));class at extends HTMLElement{constructor(){super()}get preload(){return this.hasAttribute("preload")}set preload(t){t?this.setAttribute("preload",""):this.removeAttribute("preload")}get src(){return this.getAttribute("src")||""}set src(t){this.setAttribute("src",t)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu");const t=this.parentElement;if(!t)return;const e=t.querySelector("summary");e&&(e.setAttribute("aria-haspopup","menu"),e.hasAttribute("role")||e.setAttribute("role","button"));const n=[ut(t,"compositionstart",(t=>Et(this,t))),ut(t,"compositionend",(t=>Et(this,t))),ut(t,"click",(e=>gt(t,this,e))),ut(t,"change",(e=>gt(t,this,e))),ut(t,"keydown",(e=>function(t,e,n){if(!(n instanceof KeyboardEvent))return;if(t.querySelector("details[open]"))return;const s=ct.get(e);if(!s||s.isComposing)return;const i=n.target instanceof Element&&"SUMMARY"===n.target.tagName;switch(n.key){case"Escape":t.hasAttribute("open")&&(vt(t),n.preventDefault(),n.stopPropagation());break;case"ArrowDown":{i&&!t.hasAttribute("open")&&t.setAttribute("open","");const e=ft(t,!0);e&&e.focus(),n.preventDefault()}break;case"ArrowUp":{i&&!t.hasAttribute("open")&&t.setAttribute("open","");const e=ft(t,!1);e&&e.focus(),n.preventDefault()}break;case"n":if(pt&&n.ctrlKey){const e=ft(t,!0);e&&e.focus(),n.preventDefault()}break;case"p":if(pt&&n.ctrlKey){const e=ft(t,!1);e&&e.focus(),n.preventDefault()}break;case" ":case"Enter":{const e=document.activeElement;e instanceof HTMLElement&&wt(e)&&e.closest("details")===t&&(n.preventDefault(),n.stopPropagation(),e.click())}}}(t,this,e))),ut(t,"toggle",(()=>dt(t,this)),{once:!0}),ut(t,"toggle",(()=>function(t){if(!t.hasAttribute("open"))return;for(const e of document.querySelectorAll("details[open] > details-menu")){const n=e.closest("details");n&&n!==t&&!n.contains(t)&&n.removeAttribute("open")}}(t))),this.preload?ut(t,"mouseover",(()=>dt(t,this)),{once:!0}):lt,...ht(t)];ct.set(this,{subscriptions:n,loaded:!1,isComposing:!1})}disconnectedCallback(){const t=ct.get(this);if(t){ct.delete(this);for(const e of t.subscriptions)e.unsubscribe()}}}const ct=new WeakMap,lt={unsubscribe(){}};function ut(t,e,n,s=!1){return t.addEventListener(e,n,s),{unsubscribe:()=>{t.removeEventListener(e,n,s)}}}function dt(t,e){const n=e.getAttribute("src");if(!n)return;const s=ct.get(e);if(!s)return;if(s.loaded)return;s.loaded=!0;const i=e.querySelector("include-fragment");i&&!i.hasAttribute("src")&&(i.addEventListener("loadend",(()=>mt(t))),i.setAttribute("src",n))}function ht(t){let e=!1;return[ut(t,"mousedown",(()=>e=!0)),ut(t,"keydown",(()=>e=!1)),ut(t,"toggle",(()=>{t.hasAttribute("open")&&(mt(t)||e||function(t){const e=document.activeElement;if(e&&wt(e)&&t.contains(e))return;const n=ft(t,!0);n&&n.focus()}(t))}))]}function mt(t){if(!t.hasAttribute("open"))return!1;const e=t.querySelector("[autofocus]");return!!e&&(e.focus(),!0)}function ft(t,e){const n=Array.from(t.querySelectorAll('[role^="menuitem"]:not([hidden]):not([disabled]):not([aria-disabled="true"])')),s=document.activeElement,i=s instanceof HTMLElement?n.indexOf(s):-1,o=e?n[i+1]:n[i-1],r=e?n[0]:n[n.length-1];return o||r}const pt=navigator.userAgent.match(/Macintosh/);function gt(t,e,n){const s=n.target;if(s instanceof Element&&s.closest("details")===t)if("click"===n.type){const e=s.closest('[role="menuitem"], [role="menuitemradio"]'),n=e&&"LABEL"===e.tagName&&e.querySelector("input");e&&!n&&bt(e,t)}else if("change"===n.type){const e=s.closest('[role="menuitemradio"], [role="menuitemcheckbox"]');e&&bt(e,t)}}function bt(t,e){if(t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled"))return;const n=t.closest("details-menu");if(!n)return;n.dispatchEvent(new CustomEvent("details-menu-select",{cancelable:!0,detail:{relatedTarget:t}}))&&(!function(t,e){const n=e.querySelector("[data-menu-button]");if(!n)return;const s=function(t){if(!t)return null;const e=t.hasAttribute("data-menu-button-text")?t:t.querySelector("[data-menu-button-text]");return e?e.getAttribute("data-menu-button-text")||e.textContent:null}(t);if(s)n.textContent=s;else{const e=function(t){if(!t)return null;const e=t.hasAttribute("data-menu-button-contents")?t:t.querySelector("[data-menu-button-contents]");return e?e.innerHTML:null}(t);e&&(n.innerHTML=e)}}(t,e),function(t,e){for(const n of e.querySelectorAll('[role="menuitemradio"], [role="menuitemcheckbox"]')){const e=n.querySelector('input[type="radio"], input[type="checkbox"]');let s=(n===t).toString();e instanceof HTMLInputElement&&(s=e.indeterminate?"mixed":e.checked.toString()),n.setAttribute("aria-checked",s)}}(t,e),"menuitemcheckbox"!==t.getAttribute("role")&&vt(e),n.dispatchEvent(new CustomEvent("details-menu-selected",{detail:{relatedTarget:t}})))}function wt(t){const e=t.getAttribute("role");return"menuitem"===e||"menuitemcheckbox"===e||"menuitemradio"===e}function vt(t){if(!t.hasAttribute("open"))return;t.removeAttribute("open");const e=t.querySelector("summary");e&&e.focus()}function Et(t,e){const n=ct.get(t);n&&(n.isComposing="compositionstart"===e.type)}window.customElements.get("details-menu")||(window.DetailsMenuElement=at,window.customElements.define("details-menu",at));const yt=["[data-md-button]","md-header","md-bold","md-italic","md-quote","md-code","md-link","md-image","md-unordered-list","md-ordered-list","md-task-list","md-mention","md-ref","md-strikethrough"];function At(t){const e=[];for(const n of t.querySelectorAll(yt.join(", ")))n.hidden||n.offsetWidth<=0&&n.offsetHeight<=0||n.closest("markdown-toolbar")===t&&e.push(n);return e}const xt=new WeakMap;class kt extends HTMLElement{constructor(){super();const t=()=>{const t=xt.get(this);t&&jt(this,t)};var e;this.addEventListener("keydown",(e=t,function(t){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e(t))})),this.addEventListener("click",t)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","button")}click(){const t=xt.get(this);t&&jt(this,t)}}class Mt extends kt{constructor(){super();const t=parseInt(this.getAttribute("level")||"3",10);if(t<1||t>6)return;const e=`${"#".repeat(t)} `;xt.set(this,{prefix:e})}}window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=Mt,window.customElements.define("md-header",Mt));class St extends kt{constructor(){super(),xt.set(this,{prefix:"**",suffix:"**",trimFirst:!0})}}window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=St,window.customElements.define("md-bold",St));class Tt extends kt{constructor(){super(),xt.set(this,{prefix:"_",suffix:"_",trimFirst:!0})}}window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=Tt,window.customElements.define("md-italic",Tt));class Lt extends kt{constructor(){super(),xt.set(this,{prefix:"> ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=Lt,window.customElements.define("md-quote",Lt));class Ct extends kt{constructor(){super(),xt.set(this,{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"})}}window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=Ct,window.customElements.define("md-code",Ct));class Ht extends kt{constructor(){super(),xt.set(this,{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=Ht,window.customElements.define("md-link",Ht));class Dt extends kt{constructor(){super(),xt.set(this,{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-image")||(window.MarkdownImageButtonElement=Dt,window.customElements.define("md-image",Dt));class $t extends kt{constructor(){super(),xt.set(this,{prefix:"- ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=$t,window.customElements.define("md-unordered-list",$t));class qt extends kt{constructor(){super(),xt.set(this,{prefix:"1. ",multiline:!0,orderedList:!0})}}window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=qt,window.customElements.define("md-ordered-list",qt));class Rt extends kt{constructor(){super(),xt.set(this,{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=Rt,window.customElements.define("md-task-list",Rt));class Ft extends kt{constructor(){super(),xt.set(this,{prefix:"@",prefixSpace:!0})}}window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=Ft,window.customElements.define("md-mention",Ft));class It extends kt{constructor(){super(),xt.set(this,{prefix:"#",prefixSpace:!0})}}window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=It,window.customElements.define("md-ref",It));class Wt extends kt{constructor(){super(),xt.set(this,{prefix:"~~",suffix:"~~",trimFirst:!0})}}window.customElements.get("md-strikethrough")||(window.MarkdownStrikethroughButtonElement=Wt,window.customElements.define("md-strikethrough",Wt));class Yt extends HTMLElement{constructor(){super()}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.addEventListener("keydown",Nt),this.setAttribute("tabindex","0"),this.addEventListener("focus",Bt,{once:!0})}disconnectedCallback(){this.removeEventListener("keydown",Nt)}get field(){const t=this.getAttribute("for");if(!t)return null;const e="getRootNode"in this?this.getRootNode():document;let n;return(e instanceof Document||e instanceof ShadowRoot)&&(n=e.getElementById(t)),n instanceof HTMLTextAreaElement?n:null}}function Bt({target:t}){if(!(t instanceof Element))return;t.removeAttribute("tabindex");let e="0";for(const n of At(t))n.setAttribute("tabindex",e),"0"===e&&(n.focus(),e="-1")}function Nt(t){const e=t.key;if("ArrowRight"!==e&&"ArrowLeft"!==e&&"Home"!==e&&"End"!==e)return;const n=t.currentTarget;if(!(n instanceof HTMLElement))return;const s=At(n),i=s.indexOf(t.target),o=s.length;if(-1===i)return;let r=0;"ArrowLeft"===e&&(r=i-1),"ArrowRight"===e&&(r=i+1),"End"===e&&(r=o-1),r<0&&(r=o-1),r>o-1&&(r=0);for(let t=0;t<o;t+=1)s[t].setAttribute("tabindex",t===r?"0":"-1");t.preventDefault(),s[r].focus()}function Ot(t){return t.trim().split("\n").length>1}function Pt(t,e){return Array(e+1).join(t)}function Ut(t,e,n){let s=e;const i=n?/\n/:/\s/;for(;t[s]&&!t[s].match(i);)s++;return s}window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=Yt,window.customElements.define("markdown-toolbar",Yt));let Xt=null;function Kt(t,e){const n=t.value.slice(t.selectionStart,t.selectionEnd);let s;s=e.orderedList?function(t){const e=/^\d+\.\s+/,n=t.selectionStart===t.selectionEnd;let s,i,o,r,a=t.value.slice(t.selectionStart,t.selectionEnd),c=a,l=a.split("\n");if(n){const e=t.value.slice(0,t.selectionStart).split(/\n/);o=t.selectionStart-e[e.length-1].length,r=Ut(t.value,t.selectionStart,!0),c=t.value.slice(o,r)}const u=c.split("\n");if(u.every((t=>e.test(t)))){if(l=u.map((t=>t.replace(e,""))),a=l.join("\n"),n&&o&&r){const e=u[0].length-l[0].length;i=s=t.selectionStart-e,t.selectionStart=o,t.selectionEnd=r}}else{l=function(t){let e,n,s;const i=[];for(s=e=0,n=t.length;e<n;s=++e){const e=t[s];i.push(`${s+1}. ${e}`)}return i}(l),a=l.join("\n");const{newlinesToAppend:e,newlinesToPrepend:o}=zt(t);i=t.selectionStart+e.length,s=i+a.length,n&&(i=s),a=e+a+o}return{text:a,selectionStart:i,selectionEnd:s}}(t):e.multiline&&Ot(n)?function(t,e){const{prefix:n,suffix:s,surroundWithNewlines:i}=e;let o=t.value.slice(t.selectionStart,t.selectionEnd),r=t.selectionStart,a=t.selectionEnd;const c=o.split("\n");if(c.every((t=>t.startsWith(n)&&t.endsWith(s))))o=c.map((t=>t.slice(n.length,t.length-s.length))).join("\n"),a=r+o.length;else if(o=c.map((t=>n+t+s)).join("\n"),i){const{newlinesToAppend:e,newlinesToPrepend:n}=zt(t);r+=e.length,a=r+o.length,o=e+o+n}return{text:o,selectionStart:r,selectionEnd:a}}(t,e):function(t,e){let n,s;const{prefix:i,suffix:o,blockPrefix:r,blockSuffix:a,replaceNext:c,prefixSpace:l,scanFor:u,surroundWithNewlines:d}=e,h=t.selectionStart,m=t.selectionEnd;let f=t.value.slice(t.selectionStart,t.selectionEnd),p=Ot(f)&&r.length>0?`${r}\n`:i,g=Ot(f)&&a.length>0?`\n${a}`:o;if(l){const e=t.value[t.selectionStart-1];0===t.selectionStart||null==e||e.match(/\s/)||(p=` ${p}`)}f=function(t,e,n,s=!1){if(t.selectionStart===t.selectionEnd)t.selectionStart=function(t,e){let n=e;for(;t[n]&&null!=t[n-1]&&!t[n-1].match(/\s/);)n--;return n}(t.value,t.selectionStart),t.selectionEnd=Ut(t.value,t.selectionEnd,s);else{const s=t.selectionStart-e.length,i=t.selectionEnd+n.length,o=t.value.slice(s,t.selectionStart)===e,r=t.value.slice(t.selectionEnd,i)===n;o&&r&&(t.selectionStart=s,t.selectionEnd=i)}return t.value.slice(t.selectionStart,t.selectionEnd)}(t,p,g,e.multiline);let b=t.selectionStart,w=t.selectionEnd;const v=c.length>0&&g.indexOf(c)>-1&&f.length>0;if(d){const e=zt(t);n=e.newlinesToAppend,s=e.newlinesToPrepend,p=n+i,g+=s}if(f.startsWith(p)&&f.endsWith(g)){const t=f.slice(p.length,f.length-g.length);if(h===m){let e=h-p.length;e=Math.max(e,b),e=Math.min(e,b+t.length),b=w=e}else w=b+t.length;return{text:t,selectionStart:b,selectionEnd:w}}if(v){if(u.length>0&&f.match(u)){g=g.replace(c,f);const t=p+g;return b=w=b+p.length,{text:t,selectionStart:b,selectionEnd:w}}{const t=p+f+g;return b=b+p.length+f.length+g.indexOf(c),w=b+c.length,{text:t,selectionStart:b,selectionEnd:w}}}{let t=p+f+g;b=h+p.length,w=m+p.length;const n=f.match(/^\s*|\s*$/g);if(e.trimFirst&&n){const e=n[0]||"",s=n[1]||"";t=e+p+f.trim()+g+s,b+=e.length,w-=s.length}return{text:t,selectionStart:b,selectionEnd:w}}}(t,e),function(t,{text:e,selectionStart:n,selectionEnd:s}){const i=t.selectionStart,o=t.value.slice(0,i),r=t.value.slice(t.selectionEnd);if(null===Xt||!0===Xt){t.contentEditable="true";try{Xt=document.execCommand("insertText",!1,e)}catch(t){Xt=!1}t.contentEditable="false"}if(Xt&&!t.value.slice(0,t.selectionStart).endsWith(e)&&(Xt=!1),!Xt){try{document.execCommand("ms-beginUndoUnit")}catch(t){}t.value=o+e+r;try{document.execCommand("ms-endUndoUnit")}catch(t){}t.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=n&&null!=s?t.setSelectionRange(n,s):t.setSelectionRange(i,t.selectionEnd)}(t,s)}function zt(t){const e=t.value.slice(0,t.selectionStart),n=t.value.slice(t.selectionEnd),s=e.match(/\n*$/),i=n.match(/^\n*/),o=s?s[0].length:0,r=i?i[0].length:0;let a,c;return e.match(/\S/)&&o<2&&(a=Pt("\n",2-o)),n.match(/\S/)&&r<2&&(c=Pt("\n",2-r)),null==a&&(a=""),null==c&&(c=""),{newlinesToAppend:a,newlinesToPrepend:c}}function jt(t,e){const n=t.closest("markdown-toolbar");if(!(n instanceof Yt))return;const s=Object.assign(Object.assign({},{prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,trimFirst:!1}),e),i=n.field;i&&(i.focus(),Kt(i,s))}
//# sourceMappingURL=primer_view_components.js.map
